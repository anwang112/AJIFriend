<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    
    <style>
        #btnloto {
            width: 150px;
            height: 150px;
            font-size: 30px;
            cursor: pointer;
            background-color: #ef5c79;
            color: #fff;
            border-radius: 50%;
        }

        table {
            margin: auto;
            padding: 20px;
            border-radius: 20px;
            background-color: #ecded9;
            border-radius: 50px;
        }

        table td {
            width: 100px;
            height: 100px;
            text-align: center;
            padding: 10px;
            color: #ef5c79;
            font-size: 20px;
            font-weight: 700;
        }

        .highlight {
            transform: scale(1.2);
        }
    </style>
</head>

<body>
<div class="game">
    <table>
        <tr>
            <td id="column" class="c_1">
                <img src="images/roll_2.svg" alt="">
            </td>
            <td id="column" class="c_2">
                <img src="images/roll2.svg" alt="">
            </td>
            <td id="column" class="c_3">
                <img src="images/roll_2.svg" alt="">
            </td>
            <td id="column" class="c_4">
                <img src="images/roll2.svg" alt="">
            </td>
        </tr>
        <tr>
            <td id="column" class="c_12">
                <img src="images/roll2.svg" alt="">
            </td>
            <td colspan="2" rowspan="2">
                <button id="btnloto">領金幣</button>
            </td>
            <td id="column" class="c_5">
                <img src="images/roll_2.svg" alt="">
            </td>
        </tr>
        <tr>
            <td id="column" class="c_11">
                <img src="images/roll_2.svg" alt="">
            </td>
            <td id="column" class="c_6">
                <img src="images/roll2.svg" alt="">
            </td>
        </tr>
        <tr>
            <td id="column" class="c_10">
                <img src="images/roll2.svg" alt="">
            </td>
            <td id="column" class="c_9">
                <img src="images/roll_2.svg" alt="">
            </td>
            <td id="column" class="c_8">
                <img src="images/roll2.svg" alt="">
            </td>
            <td id="column" class="c_7">
                <img src="images/roll_2.svg" alt="">
            </td>
        </tr>
    </table>
</div>
    <script>
        var btn = document.getElementById('btnloto');

        var timeId;
        var speed = 50;
        var money = rand(10, 50) * 10;
        var steps = rand(13, 25);
        var stepNum = 0;
        var restep;

        function rand(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        };
        var Today = new Date();
        nowDay = Today.getFullYear() + "-0" + (Today.getMonth() + 1) + "-" + Today.getDate();

        function getCoin(data) {
            var xhr = new XMLHttpRequest();
            xhr.onload = function () {
                

            };
            xhr.open("Post", "getCoin.php", true);
            xhr.setRequestHeader("content-type", "application/x-www-form-urlencoded");
            xhr.send("data=" + JSON.stringify(data));

        }

        function loto() {
            btn.disabled = true;
            btn.style.backgroundColor = '#aaa';
            btn.innerText = '本日已領';
            stepNum++;
            speed += 15;
            if (stepNum > 12) {
                if (stepNum % 12 == 0) {
                    restep = 12;
                } else if (stepNum % 12 == 1) {
                    restep = 1;
                    document.querySelector('.c_12').classList.toggle('highlight');
                } else {
                    restep = stepNum % 12;
                }
            } else {
                restep = stepNum;
            }

            if (stepNum == steps) {
                document.querySelector('.c_' + restep).innerText = '$' + money;

            } else {
                timerId = setTimeout(loto, speed);
            }
            document.querySelector('.c_' + restep).classList.toggle('highlight');

            if (restep > 1) {
                var b = restep - 1;
                document.querySelector('.c_' + b).classList.toggle('highlight');
            }




        }
        // function restart(){
        //     if( btn.innerText == '搖獎'){
        //         btn.innerText='重新抽獎';
        //     }else{
        //         for(i=1;i<=12;i++){ 
        //             document.querySelector('.c_'+i).classList.remove('highlight');
        //             document.querySelector('.c_'+i).innerText='';
        //         }
        //         speed = 50;
        //         money = rand(10, 10000) * 100;
        //         steps = rand(13,35);
        //         stepNum = 0;
        //     }
        // }

        function init() {
            btn.onclick = function(){
                loto();
                // if(!storage.getItem("last_play")){

                // }
            };
        }
        onload = init;
    </script>
</body>

</html>